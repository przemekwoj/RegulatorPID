package com.przemo.RegulatorPID_1;

import java.io.IOException;
import java.util.ArrayList;

import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;
import javafx.stage.Stage;

public class PID_Controller
{
 @FXML
 private Button backButton;
 @FXML
 private TextField kp_textfield;
 @FXML
 private TextField ti_textfield;
 @FXML
 private TextField td_textfield;
 @FXML
 private TextField ud_textfield;
 @FXML
 private Button button_arrow_up_kp;
 @FXML
 private Button button_arrow_up_ti;
 @FXML
 private Button button_arrow_up_td;
 @FXML
 private Button button_arrow_down_kp;
 @FXML
 private Button button_arrow_down_ti;
 @FXML
 private Button button_arrow_down_td;
 @FXML
 private Button button_set_value_pid;
 
 ArrayList<Thread> threadlist = new ArrayList<Thread>();
 ArrayList<PID_Thread> mythreadlist = new ArrayList<PID_Thread>();

 public void backToPreviousPage() throws IOException
 {
		Parent root = FXMLLoader.load(getClass().getResource("Main.fxml"));
		Scene scene = new Scene(root);
		scene.getStylesheets().add(getClass().getResource("application.css").toExternalForm());
	    Stage stage = (Stage) backButton.getScene().getWindow();
		stage.setScene(scene);
		stage.show(); 
 }
 
 public void setPID() throws InterruptedException
 {
	float kp = Float.parseFloat(kp_textfield.getText().toString());
	float ti = Float.parseFloat(ti_textfield.getText().toString());
	float td = Float.parseFloat(td_textfield.getText().toString());
	float ud = Float.parseFloat(ud_textfield.getText().toString());
	
	if(threadlist.size() == 1)
	{
		mythreadlist.get(0).setFinished(true);
		mythreadlist.remove(0);
		threadlist.remove(0);
		Thread.sleep(1000);
	}
	mythreadlist.add(new PID_Thread());
	//mythreadlist.get(0).setValue(kp, ti, td, ud);
	mythreadlist.get(0).setValue(0.1, 1.5, 0.1);
	Thread watek = new Thread(mythreadlist.get(0));
	threadlist.add(watek);
	threadlist.get(0).start();

 }
}
